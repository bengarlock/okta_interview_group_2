{"ast":null,"code":"var _jsxFileName = \"/Users/bengarlock/Desktop/okta-interview-prep/src/Components/Pages/Admin.js\",\n    _temp;\n\nimport React from 'react';\nimport { withOktaAuth } from \"@okta/okta-react\";\nimport User from \"../Cards/User\";\nimport CreateUserForm from \"../Forms/CreateUserForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default withOktaAuth((_temp = class Admin extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      users: null,\n      groups: null,\n      create_user_form: false\n    };\n\n    this.toggleCreateUserForm = () => {\n      this.setState({\n        create_user_form: !this.state.create_user_form\n      });\n    };\n\n    this.fetchGroups = () => {\n      const authorize_url = \"https://dev-49794790.okta.com/oauth2/v1/authorize\";\n      const token_url = \"https://dev-49794790.okta.com/oauth2/v1/token\";\n      const client_id = \"0oa5udbbanZtUjVxn5d6\";\n      const redirect_uri = \"http://localhost:8000/login/callback\";\n      const state = \"abc\";\n      const scope = 'openid profile email';\n      const nonce = \"abc\";\n      const code_challenge = \"ejCI_ouFJ_G2aVBvEpIQllkSx5Q94fKQnHeKtCshpLM\";\n      const code_verifier = \"ac0639dbecf900ddfb3aabd84ab0ff07ac0639dbecf900ddfb3aabd84ab0ff07\";\n\n      let qs = function (a) {\n        if (a == \"\") return {};\n        let b = {};\n\n        for (let i = 0; i < a.length; ++i) {\n          var p = a[i].split('=', 2);\n          if (p.length == 1) b[p[0]] = \"\";else b[p[0]] = decodeURIComponent(p[1].replace(/\\+/g, \" \"));\n        }\n\n        return b;\n      }(window.location.search.substr(1).split('&'));\n\n      if (qs['code'] == null) {\n        document.location.href = authorize_url + \"?response_type=code&client_id=\" + client_id + \"&redirect_uri=\" + redirect_uri + \"&state=\" + state + \"&scope=\" + scope + \"&nonce=\" + nonce + \"&code_challenge=\" + code_challenge + \"&code_challenge_method=S256\";\n      } else {\n        let xhr = new XMLHttpRequest();\n\n        if (\"withCredentials\" in xhr) {\n          xhr.onerror = function () {\n            console.log('Invalid URL or Cross-Origin Request Blocked.  You must explicitly add this site (' + window.location.origin + ') to the list of allowed websites in the administrator UI');\n          };\n\n          xhr.onload = function () {\n            console.log(this.responseText);\n          };\n\n          xhr.open('POST', token_url, true);\n          xhr.setRequestHeader(\"Accept\", 'application/json');\n          xhr.setRequestHeader(\"Content-Type\", 'application/x-www-form-urlencoded');\n          xhr.send('grant_type=authorization_code&client_id=' + client_id + '&redirect_uri=' + redirect_uri + '&code=' + qs['code'] + '&code_verifier=' + code_verifier);\n        } else {\n          console.log(\"CORS is not supported for this browser!\");\n        }\n      } // const packet = {\n      //     method: \"GET\",\n      //     headers: {\n      //         'Content-Type': \"application/json\",\n      //         'Accept': \"application/json\",\n      //     },\n      // }\n      // fetch(\"http://127.0.0.1:3000/okta_groups/\", packet)\n      //     .then(res => res.json())\n      //     .then(groups => this.setState({groups: groups}))\n\n    };\n\n    this.fetchUsers = () => {\n      const packet = {\n        method: \"GET\",\n        headers: {\n          'Content-Type': \"application/json\",\n          'Accept': \"application/json\"\n        }\n      };\n      fetch(\"http://127.0.0.1:3000/okta_users/\", packet).then(res => res.json()).then(users => this.setState({\n        users: users\n      }));\n    };\n\n    this.renderUsers = () => {\n      return this.state.users.map(user => /*#__PURE__*/_jsxDEV(User, {\n        user: user,\n        groups: this.state.groups,\n        backendUrl: this.props.backendUrl\n      }, user.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }, this));\n    };\n  }\n\n  componentDidMount() {\n    this.fetchUsers();\n    this.fetchGroups();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"page-header\",\n        children: \"User Administration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"content-header\",\n        children: \"Current Users\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: this.state.users ? this.renderUsers() : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.toggleCreateUserForm,\n          children: \"Create User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this), this.state.create_user_form ? /*#__PURE__*/_jsxDEV(CreateUserForm, {\n          backendUrl: this.props.backendUrl\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 52\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this);\n  }\n\n}, _temp));","map":{"version":3,"sources":["/Users/bengarlock/Desktop/okta-interview-prep/src/Components/Pages/Admin.js"],"names":["React","withOktaAuth","User","CreateUserForm","Admin","Component","state","users","groups","create_user_form","toggleCreateUserForm","setState","fetchGroups","authorize_url","token_url","client_id","redirect_uri","scope","nonce","code_challenge","code_verifier","qs","a","b","i","length","p","split","decodeURIComponent","replace","window","location","search","substr","document","href","xhr","XMLHttpRequest","onerror","console","log","origin","onload","responseText","open","setRequestHeader","send","fetchUsers","packet","method","headers","fetch","then","res","json","renderUsers","map","user","props","backendUrl","id","componentDidMount","render"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {withOktaAuth} from \"@okta/okta-react\";\nimport User from \"../Cards/User\";\nimport CreateUserForm from \"../Forms/CreateUserForm\";\n\n\nexport default withOktaAuth(class Admin extends React.Component{\n\n    state = {\n        users: null,\n        groups: null,\n        create_user_form: false,\n    }\n\n\n\n    componentDidMount() {\n        this.fetchUsers()\n        this.fetchGroups()\n    }\n\n    toggleCreateUserForm = () => {\n        this.setState({\n            create_user_form: !this.state.create_user_form\n        })\n    }\n\n\n\n\n\n    fetchGroups = () => {\n\n        const authorize_url  = \"https://dev-49794790.okta.com/oauth2/v1/authorize\";\n        const token_url      = \"https://dev-49794790.okta.com/oauth2/v1/token\";\n        const client_id      = \"0oa5udbbanZtUjVxn5d6\";\n        const redirect_uri   = \"http://localhost:8000/login/callback\";\n        const state          = \"abc\";\n        const scope          = 'openid profile email';\n        const nonce          = \"abc\";\n        const code_challenge = \"ejCI_ouFJ_G2aVBvEpIQllkSx5Q94fKQnHeKtCshpLM\";\n        const code_verifier  = \"ac0639dbecf900ddfb3aabd84ab0ff07ac0639dbecf900ddfb3aabd84ab0ff07\";\n\n        let qs = (function(a) {\n            if (a == \"\") return {};\n            let b = {};\n            for (let i = 0; i < a.length; ++i)\n            {\n                var p=a[i].split('=', 2);\n                if (p.length == 1)\n                    b[p[0]] = \"\";\n                else\n                    b[p[0]] = decodeURIComponent(p[1].replace(/\\+/g, \" \"));\n            }\n            return b;\n        })(window.location.search.substr(1).split('&'));\n\n        if(qs['code'] == null)\n        {\n            document.location.href = authorize_url + \"?response_type=code&client_id=\" + client_id + \"&redirect_uri=\" + redirect_uri + \"&state=\" + state + \"&scope=\" + scope + \"&nonce=\" + nonce + \"&code_challenge=\" + code_challenge + \"&code_challenge_method=S256\";\n        }else{\n            let xhr = new XMLHttpRequest();\n            if (\"withCredentials\" in xhr) {\n                xhr.onerror = function() {\n                    console.log('Invalid URL or Cross-Origin Request Blocked.  You must explicitly add this site (' + window.location.origin + ') to the list of allowed websites in the administrator UI');\n                }\n                xhr.onload = function() {\n                    console.log(this.responseText);\n                };\n                xhr.open('POST', token_url, true);\n                xhr.setRequestHeader(\"Accept\", 'application/json');\n                xhr.setRequestHeader(\"Content-Type\", 'application/x-www-form-urlencoded');\n                xhr.send('grant_type=authorization_code&client_id=' + client_id + '&redirect_uri=' + redirect_uri + '&code=' + qs['code'] + '&code_verifier=' + code_verifier);\n            } else {\n                console.log(\"CORS is not supported for this browser!\")\n            }\n        }\n\n\n\n        // const packet = {\n        //     method: \"GET\",\n        //     headers: {\n        //         'Content-Type': \"application/json\",\n        //         'Accept': \"application/json\",\n        //     },\n        // }\n        // fetch(\"http://127.0.0.1:3000/okta_groups/\", packet)\n        //     .then(res => res.json())\n        //     .then(groups => this.setState({groups: groups}))\n    }\n\n    fetchUsers = () => {\n        const packet = {\n            method: \"GET\",\n            headers: {\n                'Content-Type': \"application/json\",\n                'Accept': \"application/json\",\n            },\n        }\n        fetch(\"http://127.0.0.1:3000/okta_users/\", packet)\n            .then(res => res.json())\n            .then(users => this.setState({users: users}))\n    }\n\n    renderUsers = () => {\n        return this.state.users.map(\n            user => <User\n            key={user.id}\n            user={user}\n            groups={this.state.groups}\n            backendUrl={this.props.backendUrl} />)\n    }\n\n    render() {\n        return(\n            <div>\n                <h3 className=\"page-header\">User Administration</h3>\n\n                <h2 className=\"content-header\">Current Users</h2>\n                <div className=\"container\">\n                        {this.state.users ? this.renderUsers() : null}\n                 </div>\n\n                <div>\n                    <button onClick={this.toggleCreateUserForm}>Create User</button>\n                    {this.state.create_user_form ? <CreateUserForm backendUrl={this.props.backendUrl}/> : null}\n                </div>\n            </div>\n\n\n        )\n    }\n})\n\n"]},"metadata":{},"sourceType":"module"}