{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bengarlock/Desktop/okta-interview-prep/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bengarlock/Desktop/okta-interview-prep/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/bengarlock/Desktop/okta-interview-prep/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bengarlock/Desktop/okta-interview-prep/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/bengarlock/Desktop/okta-interview-prep/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bengarlock/Desktop/okta-interview-prep/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";var _temp;import React from'react';import{withOktaAuth}from\"@okta/okta-react\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default withOktaAuth((_temp=/*#__PURE__*/function(_React$Component){_inherits(Home,_React$Component);var _super=_createSuper(Home);function Home(){var _this;_classCallCheck(this,Home);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userLoggedIn;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.oktaAuth.isAuthenticated();case 2:userLoggedIn=_context.sent;console.log(userLoggedIn);if(!userLoggedIn){_context.next=7;break;}_context.next=7;return _this.fetchUser();case 7:case\"end\":return _context.stop();}}},_callee);}));_this.fetchUser=function(){var packet={cache:\"no-cache\",credentials:\"include\",method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"Accept\":\"application/json\"}};fetch(\"https://dev-49794790.okta.com/api/v1/users/me\",packet).then(function(res){return res.json();}).then(function(user){return _this.fetchGroups(user.id);});};_this.fetchGroups=function(id){var packet={cache:\"no-cache\",credentials:\"include\",method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"Accept\":\"application/json\"}};fetch(\"https://dev-49794790.okta.com/api/v1/users/\".concat(id,\"/groups\"),packet).then(function(res){return res.json();}).then(function(groups){return _this.checkGroupForAdmin(groups);});};_this.checkGroupForAdmin=function(groups){if(groups.errorCode){_this.setState({administrator:false});}else{var groupArray=groups.map(function(group){return group.profile.name;});if(groupArray.includes(\"Administrators\")){_this.props.setAdmin(true);}else{_this.props.setAdmin(false);}}};_this.checkUser=function(){if(_this.props.authState.isAuthenticated){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Welcome Back \",_this.props.authState.idToken.claims.name]});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"You have reached the home page of BenCo Financial Services. \"}),/*#__PURE__*/_jsx(\"div\",{children:\"Select Login to log into your account\"})]});}};return _this;}_createClass(Home,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{children:this.props.authState.isAuthenticated?/*#__PURE__*/_jsxs(\"div\",{children:[\"Welcome Back \",this.props.authState.idToken.claims.name]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:\"You have reached the home page of BenCo Financial Services.\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Select Login to log into your account\"})]})});}}]);return Home;}(React.Component),_temp));","map":{"version":3,"sources":["/Users/bengarlock/Desktop/okta-interview-prep/src/Components/Pages/Home.js"],"names":["React","withOktaAuth","componentDidMount","props","oktaAuth","isAuthenticated","userLoggedIn","console","log","fetchUser","packet","cache","credentials","method","headers","fetch","then","res","json","user","fetchGroups","id","groups","checkGroupForAdmin","errorCode","setState","administrator","groupArray","map","group","profile","name","includes","setAdmin","checkUser","authState","idToken","claims","Component"],"mappings":"+8BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,YAAT,KAA6B,kBAA7B,C,6IAGA,cAAeA,CAAAA,YAAY,sUAGvBC,iBAHuB,sEAGH,0KACW,OAAKC,KAAL,CAAWC,QAAX,CAAoBC,eAApB,EADX,QACVC,YADU,eAEhBC,OAAO,CAACC,GAAR,CAAYF,YAAZ,EAFgB,IAGZA,YAHY,+CAIN,OAAKG,SAAL,EAJM,uDAHG,SAWvBA,SAXuB,CAWX,UAAM,CACd,GAAMC,CAAAA,MAAM,CAAG,CACXC,KAAK,CAAE,UADI,CAEXC,WAAW,CAAE,SAFF,CAGXC,MAAM,CAAE,KAHG,CAIXC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,SAAU,kBAFL,CAJE,CAAf,CASAC,KAAK,CAAC,+CAAD,CAAkDL,MAAlD,CAAL,CACKM,IADL,CACU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADb,EAEKF,IAFL,CAEU,SAAAG,IAAI,QAAI,OAAKC,WAAL,CAAiBD,IAAI,CAACE,EAAtB,CAAJ,EAFd,EAGH,CAxBsB,OA0BvBD,WA1BuB,CA0BT,SAACC,EAAD,CAAQ,CAClB,GAAMX,CAAAA,MAAM,CAAG,CACXC,KAAK,CAAE,UADI,CAEXC,WAAW,CAAE,SAFF,CAGXC,MAAM,CAAE,KAHG,CAIXC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,SAAU,kBAFL,CAJE,CAAf,CAUAC,KAAK,sDAA+CM,EAA/C,YAA4DX,MAA5D,CAAL,CACKM,IADL,CACU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADb,EAEKF,IAFL,CAEU,SAAAM,MAAM,QAAI,OAAKC,kBAAL,CAAwBD,MAAxB,CAAJ,EAFhB,EAGH,CAxCsB,OA0CvBC,kBA1CuB,CA0CF,SAACD,MAAD,CAAY,CAC7B,GAAIA,MAAM,CAACE,SAAX,CAAsB,CAClB,MAAKC,QAAL,CAAc,CACVC,aAAa,CAAE,KADL,CAAd,EAGH,CAJD,IAIO,CACH,GAAIC,CAAAA,UAAU,CAAGL,MAAM,CAACM,GAAP,CAAW,SAAAC,KAAK,QAAIA,CAAAA,KAAK,CAACC,OAAN,CAAcC,IAAlB,EAAhB,CAAjB,CACA,GAAIJ,UAAU,CAACK,QAAX,CAAoB,gBAApB,CAAJ,CAA2C,CACvC,MAAK7B,KAAL,CAAW8B,QAAX,CAAoB,IAApB,EACH,CAFD,IAEO,CACH,MAAK9B,KAAL,CAAW8B,QAAX,CAAoB,KAApB,EACH,CACJ,CACJ,CAvDsB,OAyDvBC,SAzDuB,CAyDX,UAAM,CACd,GAAI,MAAK/B,KAAL,CAAWgC,SAAX,CAAqB9B,eAAzB,CAA0C,CACtC,mBAAQ,uCAAmB,MAAKF,KAAL,CAAWgC,SAAX,CAAqBC,OAArB,CAA6BC,MAA7B,CAAoCN,IAAvD,GAAR,CACH,CAFD,IAEO,CACH,mBACI,oCACI,qFADJ,cAEI,8DAFJ,GADJ,CAMH,CACJ,CApEsB,sDAsEvB,iBAAS,CACL,mBACI,qBAEK,KAAK5B,KAAL,CAAWgC,SAAX,CAAqB9B,eAArB,cACO,uCAAmB,KAAKF,KAAL,CAAWgC,SAAX,CAAqBC,OAArB,CAA6BC,MAA7B,CAAoCN,IAAvD,GADP,cAKO,wCACI,oFADJ,cAEI,8DAFJ,GAPZ,EADJ,CAkBH,CAzFsB,kBAAoB/B,KAAK,CAACsC,SAA1B,SAA3B","sourcesContent":["import React from 'react'\nimport { withOktaAuth } from \"@okta/okta-react\";\n\n\nexport default withOktaAuth(class Home extends React.Component {\n\n\n    componentDidMount = async () => {\n        const userLoggedIn = await this.props.oktaAuth.isAuthenticated()\n        console.log(userLoggedIn)\n        if (userLoggedIn) {\n            await this.fetchUser()\n        }\n    }\n\n    fetchUser = () => {\n        const packet = {\n            cache: \"no-cache\",\n            credentials: \"include\",\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Accept\": \"application/json\",\n            },\n        }\n        fetch(\"https://dev-49794790.okta.com/api/v1/users/me\", packet)\n            .then(res => res.json())\n            .then(user => this.fetchGroups(user.id))\n    }\n\n    fetchGroups = (id) => {\n        const packet = {\n            cache: \"no-cache\",\n            credentials: \"include\",\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Accept\": \"application/json\",\n            },\n        }\n\n        fetch(`https://dev-49794790.okta.com/api/v1/users/${id}/groups`, packet)\n            .then(res => res.json())\n            .then(groups => this.checkGroupForAdmin(groups))\n    }\n\n    checkGroupForAdmin = (groups) => {\n        if (groups.errorCode) {\n            this.setState({\n                administrator: false\n            })\n        } else {\n            let groupArray = groups.map(group => group.profile.name)\n            if (groupArray.includes(\"Administrators\")) {\n                this.props.setAdmin(true)\n            } else {\n                this.props.setAdmin(false)\n            }\n        }\n    }\n\n    checkUser = () => {\n        if (this.props.authState.isAuthenticated) {\n            return (<div>Welcome Back {this.props.authState.idToken.claims.name}</div>)\n        } else {\n            return (\n                <div>\n                    <div>You have reached the home page of BenCo Financial Services. </div>\n                    <div>Select Login to log into your account</div>\n                </div>\n            )\n        }\n    }\n\n    render() {\n        return(\n            <div>\n\n                {this.props.authState.isAuthenticated ? (\n                        <div>Welcome Back {this.props.authState.idToken.claims.name}</div>\n\n                    )\n                    : (\n                        <>\n                            <div>You have reached the home page of BenCo Financial Services.</div>\n                            <div>Select Login to log into your account</div>\n                        </>\n                    )\n                }\n            </div>\n\n\n        )\n    }\n})\n\n"]},"metadata":{},"sourceType":"module"}