{"ast":null,"code":"var _jsxFileName = \"/Users/bengarlock/Desktop/okta-interview-prep/src/Components/Pages/Admin.js\",\n    _temp;\n\nimport React from 'react';\nimport { withOktaAuth } from \"@okta/okta-react\";\nimport User from \"../Cards/User\";\nimport CreateUserForm from \"../Forms/CreateUserForm\";\nimport \"../Stylesheets/Admin.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default withOktaAuth((_temp = class Admin extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      users: null,\n      groups: null,\n      create_user_form: false\n    };\n\n    this.toggleCreateUserForm = () => {\n      this.setState({\n        create_user_form: !this.state.create_user_form\n      });\n    };\n\n    this.fetchUsers = async () => {\n      const packet = {\n        method: \"GET\",\n        headers: {\n          'content-type': 'application/json',\n          accept: 'application/json'\n        }\n      };\n      fetch(\"http://localhost:3000/okta_users\", packet).then(res => res.json()).then(users => this.setState({\n        users: users\n      }));\n    };\n\n    this.updateUsers = (user, group, method) => {\n      if (method === \"toggle-group\") {\n        console.log(\"toggle groups\");\n        let newUsers = [...this.state.users];\n        let updatedUser = newUsers.find(user => user.id === user.id);\n\n        if (updatedUser) {\n          let groups = [...updatedUser.groups];\n          let currentGroupIds = groups.map(g => g.id);\n\n          if (currentGroupIds.includes(group.id)) {\n            //remove group from user\n            let updatedGroups = groups.filter(g => g.id !== group.id);\n            console.log(groups);\n            console.log(updatedGroups);\n            updatedUser.groups = updatedGroups;\n            this.setState({\n              users: newUsers\n            });\n          } else {\n            //add group to user\n            updatedUser.groups = [...this.state.groups, group];\n            this.setState({\n              users: newUsers\n            });\n          }\n\n          updatedUser.groups = groups;\n          this.setState({\n            users: newUsers\n          });\n        }\n      } else if (method === \"delete-user\") {\n        let newUsers = [...this.state.users];\n        let newUsersSansUser = newUsers.filter(u => u.id !== user.id);\n        this.setState({\n          users: newUsersSansUser\n        });\n      } else if (method === \"create-user\") {\n        user.groups = group;\n        let newUsers = [...this.state.users, user];\n        this.setState({\n          users: newUsers\n        });\n      } else if (method === \"update-user\") {\n        let newUsers = [...this.state.users];\n        let updatedUser = newUsers.find(user => user.id === user.id);\n        updatedUser.profile.firstName = user.profile.firstName;\n        updatedUser.profile.lastName = user.profile.lastName;\n        updatedUser.profile.email = user.profile.email;\n        updatedUser.profile.login = user.profile.login;\n        updatedUser.profile.mobilePhone = user.profile.mobilePhone;\n        this.setState({\n          users: newUsers\n        });\n      }\n    };\n\n    this.renderUsers = () => {\n      return this.state.users.map(user => /*#__PURE__*/_jsxDEV(User, {\n        updateUsers: this.updateUsers,\n        user: user,\n        backendUrl: this.props.backendUrl\n      }, user.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 46\n      }, this));\n    };\n\n    this.toggleMenu = () => {\n      this.setState({\n        create_user_form: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.fetchUsers();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"page-header\",\n        children: \"User Administration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"create-user-button\",\n        onClick: this.toggleCreateUserForm,\n        children: \"Create User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), this.state.create_user_form ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"menu-trigger-wrapper\",\n          onClick: this.toggleMenu\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"create-user-form-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(CreateUserForm, {\n            toggleMenu: this.toggleMenu,\n            updateUser: this.updateUsers,\n            backendUrl: this.props.backendUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true) : null, /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"content-header\",\n        children: \"Current Users\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: this.state.users ? this.renderUsers() : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this);\n  }\n\n}, _temp));","map":{"version":3,"sources":["/Users/bengarlock/Desktop/okta-interview-prep/src/Components/Pages/Admin.js"],"names":["React","withOktaAuth","User","CreateUserForm","Admin","Component","state","users","groups","create_user_form","toggleCreateUserForm","setState","fetchUsers","packet","method","headers","accept","fetch","then","res","json","updateUsers","user","group","console","log","newUsers","updatedUser","find","id","currentGroupIds","map","g","includes","updatedGroups","filter","newUsersSansUser","u","profile","firstName","lastName","email","login","mobilePhone","renderUsers","props","backendUrl","toggleMenu","componentDidMount","render"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {withOktaAuth} from \"@okta/okta-react\";\nimport User from \"../Cards/User\";\nimport CreateUserForm from \"../Forms/CreateUserForm\";\nimport \"../Stylesheets/Admin.css\"\n\n\n\nexport default withOktaAuth(class Admin extends React.Component{\n\n    state = {\n        users: null,\n        groups: null,\n        create_user_form: false,\n    }\n\n    componentDidMount() {\n        this.fetchUsers()\n    }\n\n    toggleCreateUserForm = () => {\n        this.setState({\n            create_user_form: !this.state.create_user_form\n        })\n    }\n\n    fetchUsers = async () => {\n        const packet = {\n            method: \"GET\",\n            headers: {\n                'content-type': 'application/json',\n                accept: 'application/json',\n            },\n        }\n        fetch(\"http://localhost:3000/okta_users\", packet)\n            .then(res => res.json())\n            .then(users => this.setState({users: users}))\n    }\n\n    updateUsers = (user, group, method) => {\n\n        if (method === \"toggle-group\") {\n            console.log(\"toggle groups\")\n            let newUsers = [...this.state.users]\n            let updatedUser = newUsers.find(user => user.id === user.id)\n\n            if (updatedUser) {\n                let groups = [...updatedUser.groups]\n                let currentGroupIds = groups.map(g => g.id)\n                if (currentGroupIds.includes(group.id)) {\n                    //remove group from user\n                    let updatedGroups = groups.filter(g => g.id !== group.id)\n                    console.log(groups)\n                    console.log(updatedGroups)\n                    updatedUser.groups = updatedGroups\n                    this.setState({\n                        users: newUsers\n                    })\n\n                } else {\n                    //add group to user\n                    updatedUser.groups = [...this.state.groups, group]\n                    this.setState({\n                        users: newUsers\n                    })\n                }\n\n\n\n                updatedUser.groups = groups\n                this.setState({\n                    users: newUsers\n                })\n            }\n        } else if (method === \"delete-user\") {\n            let newUsers = [...this.state.users]\n            let newUsersSansUser = newUsers.filter(u => u.id !== user.id)\n            this.setState({\n                users: newUsersSansUser\n            })\n        } else if (method === \"create-user\") {\n            user.groups = group\n            let newUsers = [...this.state.users, user]\n            this.setState({\n                users: newUsers\n            })\n        } else if (method === \"update-user\") {\n            let newUsers = [...this.state.users]\n            let updatedUser = newUsers.find(user => user.id === user.id)\n            updatedUser.profile.firstName = user.profile.firstName\n            updatedUser.profile.lastName = user.profile.lastName\n            updatedUser.profile.email = user.profile.email\n            updatedUser.profile.login = user.profile.login\n            updatedUser.profile.mobilePhone = user.profile.mobilePhone\n            this.setState({\n                users: newUsers\n            })\n        }\n    }\n\n    renderUsers = () => {\n        return this.state.users.map( user => <User\n            updateUsers={this.updateUsers}\n            key={user.id}\n            user={user}\n            backendUrl={this.props.backendUrl} />)\n    }\n\n    toggleMenu = () => {\n        this.setState({\n            create_user_form: false\n        })\n    }\n\n    render() {\n        return(\n            <div>\n                <h3 className=\"page-header\">User Administration</h3>\n\n                <div className=\"create-user-button\" onClick={this.toggleCreateUserForm}>Create User</div>\n                {this.state.create_user_form ? (\n                    <>\n                        <div className=\"menu-trigger-wrapper\" onClick={this.toggleMenu}></div>\n                        <div className=\"create-user-form-wrapper\">\n                            <CreateUserForm\n                                toggleMenu={this.toggleMenu}\n                                updateUser={this.updateUsers}\n                                backendUrl={this.props.backendUrl}\n                            />\n                        </div>\n                    </>\n\n                )\n                    : null\n                }\n                <h2 className=\"content-header\">Current Users</h2>\n                <div className=\"container\">\n                        {this.state.users ? this.renderUsers() : null}\n                 </div>\n            </div>\n\n\n        )\n    }\n})\n\n"]},"metadata":{},"sourceType":"module"}