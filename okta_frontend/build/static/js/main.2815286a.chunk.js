(this["webpackJsonpokta-auth-project"]=this["webpackJsonpokta-auth-project"]||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(28),c=n.n(i),s=(n(36),n(4)),o=n(5),l=n(7),u=n(6),h=(n(37),n(12)),j=n(2),d=(n(49),n(0)),p=Object(j.d)(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(d.jsx)("nav",{children:Object(d.jsxs)("ul",{id:"navbar-wrapper",children:[Object(d.jsx)("li",{className:"navbar-brand",children:"BenCo"}),Object(d.jsx)("li",{className:"nav-link",children:Object(d.jsx)(h.b,{className:"nav-link",to:"/",children:"Home"})}),this.props.authState.isAuthenticated?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("li",{className:"nav-link",children:Object(d.jsx)(h.b,{className:"nav-link",to:"/profile",children:"Profile"})}),this.props.userState.admin?Object(d.jsx)("li",{className:"nav-link",children:Object(d.jsx)(h.b,{className:"nav-link",to:"/admin",children:"Admin"})}):null,Object(d.jsx)("li",{className:"nav-link",children:Object(d.jsx)(h.b,{className:"nav-link",to:"/logout",children:"Logout"})})]}):Object(d.jsx)("li",{className:"nav-link",children:Object(d.jsx)(h.b,{className:"nav-link",to:"/login",children:"Login"})})]})})}}]),n}(r.a.Component)),b=n(13),m=n.n(b),O=n(18),f=n(16),g=Object(j.d)(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).login=a.login.bind(Object(f.a)(a)),a.logout=a.logout.bind(Object(f.a)(a)),a}return Object(o.a)(n,[{key:"login",value:function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.oktaAuth.signInWithRedirect();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.oktaAuth.signOut("/");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.props.authState.isPending?Object(d.jsx)("div",{children:"Loading..."}):this.props.authState.isAuthenticated?Object(d.jsx)("button",{onClick:this.logout,children:"Logout"}):Object(d.jsx)("button",{onClick:this.login,children:"Login"})}}]),n}(a.Component)),v=Object(j.d)(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={currentUser:null,groups:null,administrator:null},e.componentDidMount=function(){},e.renderUserInfo=function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"Your Profile"}),Object(d.jsxs)("div",{children:["Name: ",e.props.authState.idToken.claims.name]}),Object(d.jsxs)("div",{children:["E-Mail ",e.props.authState.idToken.claims.email]}),Object(d.jsx)(g,{})]})},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{})}}]),n}(r.a.Component)),x=Object(j.d)(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=Object(O.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.oktaAuth.isAuthenticated();case 2:if(n=t.sent,console.log(n),!n){t.next=7;break}return t.next=7,e.fetchUser();case 7:case"end":return t.stop()}}),t)}))),e.fetchUser=function(){fetch("https://dev-49794790.okta.com/api/v1/users/me",{cache:"no-cache",credentials:"include",method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){return e.fetchGroups(t.id)}))},e.fetchGroups=function(t){fetch("https://dev-49794790.okta.com/api/v1/users/".concat(t,"/groups"),{cache:"no-cache",credentials:"include",method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){return e.checkGroupForAdmin(t)}))},e.checkGroupForAdmin=function(t){t.errorCode?e.setState({administrator:!1}):t.map((function(e){return e.profile.name})).includes("Administrators")?e.props.setAdmin(!0):e.props.setAdmin(!1)},e.checkUser=function(){return e.props.authState.isAuthenticated?Object(d.jsxs)("div",{children:["Welcome Back ",e.props.authState.idToken.claims.name]}):Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:"You have reached the home page of BenCo Financial Services. "}),Object(d.jsx)("div",{children:"Select Login to log into your account"})]})},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{children:this.props.authState.isAuthenticated?Object(d.jsxs)("div",{children:["Welcome Back ",this.props.authState.idToken.claims.name]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{children:"You have reached the home page of BenCo Financial Services."}),Object(d.jsx)("div",{children:"Select Login to log into your account"})]})})}}]),n}(r.a.Component)),k=Object(j.d)(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{children:Object(d.jsx)(g,{setUserState:this.props.setUserState})})}}]),n}(r.a.Component)),C=Object(j.d)(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onClickHandler=function(){e.props.oktaAuth.tokenManager.clear(),e.props.oktaAuth.signOut("/")},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{children:this.props.authState.isAuthenticated?Object(d.jsx)("button",{onClick:this.onClickHandler,children:"Logout"}):null})}}]),n}(r.a.Component)),y=(n(51),n(52),Object(j.d)(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={firstName:e.props.user.profile.firstName,lastName:e.props.user.profile.lastName,email:e.props.user.profile.email,login:e.props.user.profile.login,mobilePhone:e.props.user.profile.mobilePhone,groups:[]},e.onChangeHandler=function(t){"firstName"===t.target.name?e.setState({firstName:t.target.value}):"lastName"===t.target.name?e.setState({lastName:t.target.value}):"email"===t.target.name?e.setState({email:t.target.value}):"login"===t.target.name?e.setState({login:t.target.value}):"mobilePhone"===t.target.name&&e.setState({mobilePhone:t.target.value})},e.onSubmitHandler=function(e){console.log("submit"),e.preventDefault()},e.renderGroupButtons=function(){},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"edit-form-wrapper",children:[Object(d.jsx)("div",{className:"edit-form-content",children:Object(d.jsx)("form",{onSubmit:this.onSubmitHandler,children:Object(d.jsxs)("ul",{className:"edit-form-content",children:[Object(d.jsx)("li",{children:Object(d.jsx)("input",{type:"text",name:"firstName",value:this.state.firstName,onChange:this.onChangeHandler,placeholder:"First Name"})}),Object(d.jsx)("li",{children:Object(d.jsx)("input",{type:"text",name:"lastName",value:this.state.lastName,onChange:this.onChangeHandler,placeholder:"Last Name"})}),Object(d.jsx)("li",{children:Object(d.jsx)("input",{type:"text",name:"email",value:this.state.email,onChange:this.onChangeHandler,placeholder:"Email"})}),Object(d.jsx)("li",{children:Object(d.jsx)("input",{type:"text",name:"login",value:this.state.login,onChange:this.onChangeHandler,placeholder:"Login"})}),Object(d.jsx)("li",{children:Object(d.jsx)("input",{type:"submit"})})]})})}),Object(d.jsxs)("div",{className:"edit-form-content",children:[Object(d.jsx)("h3",{children:"User Groups"}),Object(d.jsx)("div",{children:this.renderGroupButtons()})]})]})}}]),n}(r.a.Component))),N=Object(j.d)(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={renderEditForm:!1},e.onClickHandler=function(){e.setState({renderEditForm:!e.state.renderEditForm})},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"user-page-wrapper",children:[Object(d.jsxs)("div",{className:"user-container",onClick:this.onClickHandler,children:[Object(d.jsxs)("div",{children:[this.props.user.profile.firstName," ",this.props.user.profile.lastName]}),Object(d.jsx)("div",{children:this.props.user.profile.mobilePhone})]}),this.state.renderEditForm?Object(d.jsx)("div",{className:"edit-user-form",children:Object(d.jsx)(y,{user:this.props.user,backendUrl:this.props.backendUrl})}):null]})}}]),n}(r.a.Component)),S=n(25),A="00g58yijoXDO7O43Z5d6",U=Object(j.d)(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={firstName:"",lastName:"",email:"",login:"",mobilePhone:"",groups:[A],button:!1,currentUser:null},e.onChangeHandler=function(t){"firstName"===t.target.name?e.setState({firstName:t.target.value}):"lastName"===t.target.name?e.setState({lastName:t.target.value}):"email"===t.target.name?e.setState({email:t.target.value}):"login"===t.target.name?e.setState({login:t.target.value}):"mobilePhone"===t.target.name&&e.setState({mobilePhone:t.target.value})},e.onClickHandler=function(t){var n=Object(S.a)(e.state.groups);e.state.groups.find((function(e){return e===t.target.value}))?(n=e.state.groups.filter((function(e){return e!==t.target.value})),e.setState({groups:n,button:!1})):e.setState({groups:[].concat(Object(S.a)(n),[t.target.value]),button:!0})},e.onSubmitHandler=function(t){t.preventDefault();var n={profile:{firstName:e.state.firstName,lastName:e.state.lastName,email:e.state.email,login:e.state.login}},a={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"SSWS 00WhTQiM4FjUkWkH3oIza6jFaJjS9gGHf8HRgK2ReG"},body:JSON.stringify(n)};fetch('"'.concat(e.props.backendUrl,'/oktausers"'),a).then((function(e){return e.json()})).then(console.log)},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h6",{children:"Create User"}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{style:this.state.button?{backgroundColor:"green"}:{backgroundColor:"lightgray"},value:"00g5iptquShLgpDGn5d6",name:"administrators",onClick:this.onClickHandler,children:"Make Administrator"})}),Object(d.jsxs)("form",{onSubmit:this.onSubmitHandler,children:[Object(d.jsx)("input",{type:"text",name:"firstName",value:this.state.firstName,onChange:this.onChangeHandler,placeholder:"First Name"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"text",name:"lastName",value:this.state.lastName,onChange:this.onChangeHandler,placeholder:"Last Name"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"text",name:"email",value:this.state.email,onChange:this.onChangeHandler,placeholder:"Email"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"text",name:"login",value:this.state.login,onChange:this.onChangeHandler,placeholder:"Login"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"text",name:"mobilePhone",value:this.state.mobilePhone,onChange:this.onChangeHandler,placeholder:"Phone"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"submit",value:"submit"})]}),Object(d.jsx)("div",{children:Object(d.jsx)("h6",{children:"Add User to Groups"})})]})}}]),n}(r.a.Component)),H=Object(j.d)(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={users:null,groups:null,create_user_form:!1},e.toggleCreateUserForm=function(){e.setState({create_user_form:!e.state.create_user_form})},e.fetchGroups=function(){fetch("http://127.0.0.1:3000/okta_groups/",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){return e.setState({groups:t})}))},e.fetchUsers=function(){fetch("http://127.0.0.1:3000/okta_users/",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){return e.setState({users:t})}))},e.renderUsers=function(){return e.state.users.map((function(t){return Object(d.jsx)(N,{user:t,groups:e.state.groups,backendUrl:e.props.backendUrl},t.id)}))},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.fetchUsers(),this.fetchGroups()}},{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{className:"page-header",children:"User Administration"}),Object(d.jsx)("h2",{className:"content-header",children:"Current Users"}),Object(d.jsx)("div",{className:"container",children:this.state.users?this.renderUsers():null}),Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:this.toggleCreateUserForm,children:"Create User"}),this.state.create_user_form?Object(d.jsx)(U,{backendUrl:this.props.backendUrl}):null]})]})}}]),n}(r.a.Component)),w=n(17),F=n(3),G={clientId:"0oa5udbbanZtUjVxn5d6",issuer:"https://dev-49794790.okta.com/oauth2/default",redirectUri:window.location.origin+"/login/callback",scopes:["openid","profile","email"],pkce:!0},P="http://127.0.0.1:3000",T=new w.OktaAuth(G),L=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={admin:!1},e.setAdmin=function(t){e.setState({admin:t})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(d.jsx)(h.a,{children:Object(d.jsx)(j.c,{oktaAuth:T,children:Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(p,{userState:this.state}),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(F.b,{exact:!0,path:"/",children:Object(d.jsx)(F.a,{to:"/home"})}),Object(d.jsx)(F.b,{path:"/home",render:function(){return Object(d.jsx)(x,{backendUrl:P,setAdmin:e.setAdmin})}}),Object(d.jsx)(F.b,{path:"/login",render:function(){return Object(d.jsx)(k,{baseUrl:"https://dev-49794790.okta.com"})}}),Object(d.jsx)(F.b,{path:"/login/callback",exact:!0,component:j.a}),Object(d.jsx)(j.b,{path:"/profile",render:function(){return Object(d.jsx)(v,{})}}),Object(d.jsx)(j.b,{path:"/logout",render:function(){return Object(d.jsx)(C,{})}}),this.state.admin?Object(d.jsx)(j.b,{backendUrl:P,path:"/admin",component:H}):null]})]})})})}}]),n}(r.a.Component),E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};c.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(L,{})}),document.getElementById("root")),E()}},[[53,1,2]]]);
//# sourceMappingURL=main.2815286a.chunk.js.map